{% load static %}
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	    <meta name="description" content="Página de eventos deportivos">
	    <meta name="author" content="">
	    <title>ABC Eventos Deportivos</title>
	    <link rel="icon" href="{% static 'img/icono.png' %}">
	    <!-- Bootstrap core CSS -->
	    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
	    <!-- Fuentes de Google -->
	    <link href="https://fonts.googleapis.com/css?family=Dosis|Muli|Open+Sans+Condensed:300" rel="stylesheet">
	    <!-- Custom styles for this page -->
	    <link href="{% static 'css/estilos_dashboard.css' %}" rel="stylesheet">
	    <link href="{% static 'css/efectos.css' %}" rel="stylesheet">
	    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css" rel="stylesheet">
	    <!-- Material Icons Google -->
	    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	    <!--JSGrid para Tablas-->
	    <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.css" />
	    <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid-theme.min.css" />
	    
	    <style type="text/css">
	      th{
	      	font-size:1.1em;
	      }
	      
	      .imagen-evento-tabla{
	      	border-radius:100px;
	      	height:50px;
	      	width:50px;
	      }
	    </style>
  </head>
	<body>
		<div id="main-body" style="z-index: -50">
		  
		  <!-----BARRA LATERAL----->
	      <ul id="slide-out" class="side-nav fixed">
	        <li>
	          <div id="encabezado-barra" class="text-white teal darken-2">
	            <div class="row justify-content-center">
	              <div class="col-12 text-center">
	                <img id="avatar-usuario" src="{{usuario.foto.url}}"> 
	                <h5 id="nombre-usuario">{{usuario.user.first_name}}</h5>
	                <h6 id="rol-usuario">{{usuario.rol}}</h6>
	              </div>
	            </div>
	          </div>
	        </li>
	        <!--Botón Inicio-->
	        <li><a id="btn-inicio" class="hvr-sweep-to-right waves-effect waves-light" href="/">
	          <i class="material-icons">home</i>Inicio</a>
	        </li>
	
	        <!--Botón Iniciar Sesión-->
	        <li><a id="btn-iniciar-sesion" class="hvr-sweep-to-right waves-effect waves-light oculto">
	          <i class="material-icons">home</i>Iniciar sesión</a></li>
	
	        <!--Botón Mi Información-->
	        <li><a id="btn-mi-info" class="hvr-sweep-to-right waves-effect waves-light">
	          <i class="material-icons">account_circle</i>Mi Información</a>
	        </li>
	
	        <!--Sección Botones Usuarios-->
	        <li id="dropdown-usuarios" class="no-padding hvr-sweep-to-right waves-effect waves-light">
	          <ul class="collapsible collapsible-accordion">
	            <li>
	              <a class="collapsible-header">Usuarios
	                <i class="material-icons">face</i> <i class="material-icons right">arrow_drop_down</i></a>
	              <div class="collapsible-body">
	                <ul>
	                  <li><a id="btn-crear-usuario" class="hvr-sweep-to-right waves-effect waves-light" href="/formulario-usuario">
	                    <i class="material-icons">person_add</i>Crear Usuario</a></li>
	                  <li><a id="btn-listar-usuarios" class="hvr-sweep-to-right waves-effect waves-light">
	                    <i class="material-icons">group</i>Listar Usuarios</a></li>
	                </ul>
	              </div>
	            </li>
	          </ul>
	        </li>
	        <!--Sección Botones Eventos-->
	        <li id="dropdown-eventos" class="no-padding hvr-sweep-to-right waves-effect waves-light">
	          <ul class="collapsible collapsible-accordion">
	            <li>
	              <a class="collapsible-header">Eventos
	                <i class="material-icons">event</i> <i class="material-icons right">arrow_drop_down</i></a>
	              <div class="collapsible-body">
	                <ul>
	                  <li><a id="btn-crear-evento" class="hvr-sweep-to-right waves-effect waves-light" href="/formulario_evento">
	                    <i class="material-icons">event_available</i>Crear Evento</a></li>
	                  <li><a id="btn-listar-eventos" class="hvr-sweep-to-right waves-effect waves-light" href="/ver_listado_eventos_usuario">
	                    <i class="material-icons">event_note</i>Listar Eventos</a></li>
	                  {% if usuario.rol == 'Participante' %}
	                    <li><a id="btn-listar-eventos" class="hvr-sweep-to-right waves-effect waves-light">
	                    <i class="material-icons">event_note</i>Mis Eventos</a></li>
	                  {% endif %}
	                  <li><a id="btn-dashboard-eventos" class="hvr-sweep-to-right waves-effect waves-light">
	                    <i class="material-icons">dashboard</i> Dashboard Eventos</a></li>
	                </ul>
	              </div>
	            </li>
	          </ul>
	        </li>
	        <!--Sección Botones Actividades-->
	        <li id="dropdown-actividades" class="no-padding hvr-sweep-to-right waves-effect waves-light">
	          <ul class="collapsible collapsible-accordion">
	            <li>
	              <a class="collapsible-header">Actividades
	                <i class="material-icons">extension</i> <i class="material-icons right">arrow_drop_down</i></a>
	              <div class="collapsible-body">
	                <ul>
	                  <li><a id="btn-crear-actividad" class="hvr-sweep-to-right waves-effect waves-light" href="/formulario_actividad">
	                    <i class="material-icons">add_circle_outline</i>Crear Actividad</a></li>
	                  <li><a id="btn-listar-actividades" class="hvr-sweep-to-right waves-effect waves-light">
	                    <i class="material-icons">list</i>Listar Actividades</a></li>
	                  <li><a id="btn-calendario-actividades" class="hvr-sweep-to-right waves-effect waves-light">
	                    <i class="material-icons">event</i>Calendario Actividades</a></li>
	                </ul>
	              </div>
	            </li>
	          </ul>
	        </li>
	
	        <!--Sección Botones Noticias-->
	        <li id="dropdown-noticias" class="no-padding hvr-sweep-to-right waves-effect waves-light">
	          <ul class="collapsible collapsible-accordion">
	            <li>
	              <a class="collapsible-header">Noticias
	                <i class="material-icons">receipt</i> <i class="material-icons right">arrow_drop_down</i></a>
	              <div class="collapsible-body">
	                <ul>
	                  <li><a id="btn-crear-noticia" class="hvr-sweep-to-right waves-effect waves-light" href="/formulario_noticia">
	                    <i class="material-icons">library_add</i>Crear Noticia</a></li>
	                  <li><a id="btn-listar-noticias" class="hvr-sweep-to-right waves-effect waves-light">
	                    <i class="material-icons">library_books</i>Listar Noticias</a></li>
	                </ul>
	              </div>
	            </li>
	          </ul>
	        </li>
	
	        <!--Botón Cerrar Sesión-->
	        <form action="">{% csrf_token %}
	        <li><a id="btn-cerrar-sesion" class="hvr-sweep-to-right waves-effect waves-light" name="cerrarsesion" href="{% url 'deportes:logout' %}">
	          <i class="material-icons">power_settings_new</i>Cerrar sesión</a></li>
	        </form>
	        
	        
	        <!--Botón Volver a Página Principal-->
	        <li><a id="btn-pag-principal" class="hvr-sweep-to-right waves-effect waves-light oculto" href="index.html">
	          <i class="material-icons">arrow_back</i>Página principal</a></li>
	      </ul>
	      
	      <!------------------------------CUERPO DEL DASHBOARD------------------------->
	      <div id="main">
	
	        <!--BARRA DE NAVEGACIÓN-->
	        <nav>
	          <div class="nav-wrapper teal darken-2">
	            <a href="#!" class="brand-logo center"><img src="{% static 'img/LogoABC.png' %}" height="60"></a>
	            <a href="#" data-activates="slide-out" class="button-collapse"><i class="material-icons">menu</i></a>
	          </div>
	        </nav>
	        
	        
	        <!--**********CALENDARIO ACTIVIDADES*********-->
	        <div id="listado-eventos-usuario" class="container">
	          <div class="row justify-content-center">
	            <h2 class="teal-text">Mis Eventos</h2>
	          </div>
	          
	          <div class="row">
	          	<table class="bordered highlight">
			        <thead>
			          <tr>
			          	  <th>Imagen</th>
			              <th>Evento</th>
			              <th>Estado</th>
			              <th>Acción</th>
			          </tr>
			        </thead>
					<!--  ESTADOS Y FUNCIONES
					Preinscrito [grey darken-1] -> Boton Pagar desactivado
	          		Inscrito [teal] -> Boton Pagar
	          		Participante [ deep-purple lighten-1] -> Boton Generar Escarapela
					-->
			        <tbody>
			        	
			        	{% for eve in evento_usu %}
			        	
			        		{% if eve.estado == 'Pre-inscrito' %} 
			        			<tr>
					        		<td><img class ="imagen-evento-tabla" src="{%static eve.id_evento.imagen.url %}"></td>
					        		<td>{{eve.id_evento}}</td>
					        		<td><h5 class="new badge grey darken-1" data-badge-caption="">{{eve.estado}}</h5></td>
					        		<td><a href = "#!" class = "btn disabled waves-effect waves-light hvr-wobble-skew">Pagar</a></td>
					        	</tr>
			        		{% endif %}
			        		
			        		{% if eve.estado == 'Inscrito' %} 
			        			<tr>
					        		<td><img class ="imagen-evento-tabla" src="{%static eve.id_evento.imagen.url %}"></td>
					        		<td>{{eve.id_evento}}</td>
					        		<td><h5 class="new badge teal" data-badge-caption="">{{eve.estado}}</h5></td>
					        		<td><a href = "/pagar_evento/{{eve.id_evento.pk}}" class = "btn waves-effect waves-light hvr-wobble-skew">Pagar</a></td>
					        	</tr>
			        		{% endif %}
			        		
			        		{% if eve.estado == 'Participante' %} 
			        			<tr>
					        		<td><img class ="imagen-evento-tabla" src="{%static eve.id_evento.imagen.url %}"></td>
					        		<td>{{eve.id_evento}}</td>
					        		<td><h5 class="new badge deep-purple lighten-1" data-badge-caption="">{{eve.estado}}</h5></td>
					        		<td><a href = "/generar_escarapela/{{eve.id_evento.pk}}" class = "btn deep-purple lighten-2 waves-effect waves-light hvr-wobble-skew">Escarapela</a></td>
					        	</tr>
			        		{% endif %}
			        		
			        		{% empty %}
			        			<tr>El usuario no está registrado en ningun evento</tr>
			        	{% endfor %}

			        </tbody>
			      </table>
			      
			      <div class = "row justify-content-center" style = "padding-top:60px; margin-left:90px">
			      	<div class="col-md-1">
			      		<a href="{% url 'deportes:lista_eventos' %}" class = "btn teal accent-4 waves-effect waves-light hvr-wobble-skew">Ver más eventos</a>
			      	</div>
			      </div>

	          </div>
	        </div>
	        
	      </div>
    
		</div>
		
		<!-- Bootstrap core JavaScript -->
    <script src="https://code.jquery.com/jquery-3.2.1.js"></script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <!--JavaScript para JSGrid-->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.js"></script>
    <!-- Plugin JavaScript -->
    <script src="{% static 'js/jquery.easing.min.js' %}"></script>
    <!-- Custom JavaScript for this theme -->
    <script src="{% static 'js/scrolling-nav.js' %}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <script src="{% static 'js/dashboard2.js' %}"></script>
    
    <script type="text/javascript">
      //---------------------------
      var ejemplos_eventos = [
        {% for das in lista_dashboard %}
      	{"Nombre": "{{ das.titulo }}", "Ciudad": "{{ das.ciudad }}", "Lugar": "{{das.lugar}}", "Precio":"{{das.costo}}", "Cantidad de Participantes":"{{das.participante}}", "Fecha de Inicio":"{{das.fechaInicio}}", "Hora de Inicio":"{{das.hora}}", "Encargado":"{{das.encargado}}", "Restricciones":"{{das.restriccion}}"},
      	{% endfor %}
      	];
      	
      
      var ejemplos_noticias = [
          {% for das in lista_noticia_dashboard %}
        	{"Titulo": "{{ das.titulo }}", "Copete": "{{ das.copete }}", "Fecha": "{{das.fecha}}", "Autor": "{{das.autor}}"},
        	{% endfor%}
        ];
      
      var ejemplos_usuarios = [
        {% for das in lista_usuarios_dashboard %}
          	{"Nombres": "{{ das.nombres }}", "Apellidos": "{{ das.apellidos}}", "Nickname": "{{ das.nickname}}", "Email": "{{ das.email}}", "Genero":"{{ das.genero}}", "Rol":"{{ das.rol}}", "Fecha de Nacimiento":"{{ das.fechaNacimiento}}"},
        {% endfor%}
      ];

    </script>
 
    <!--****************************************************-->
    <script type="text/javascript">

      $(document).ready(function(){
        $(".button-collapse").sideNav({
          menuWidth: 250,
          draggable: true,
        });
        $('.collapsible').collapsible();
      });


      //ACTUALIZAR LA PÁGINA DE ACUERDO AL ROL DE CADA USUARIO (Administrador, Gerente, Operador, Participante, Usuario Público)
      actualizarMenu('{{usuario.rol}}');

    </script>
		
	</body>
</html>